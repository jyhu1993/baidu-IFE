<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>动画</title>
</head>
<body>
	<div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
	<button id="fade-btn">淡出</button>	
	<script type="text/javascript">

		var obj=document.getElementById('fade-obj');
		var btn=document.getElementById("fade-btn")
		obj.style.opacity=1;
		var opa=obj.style.opacity;
		//使用setTimeout实现；
		/*function setFade(){
				btn.disabled=true;
				opa=opa-0.1;
				obj.style.opacity=opa;
				t=setTimeout("setFade()",100);	
				if (opa<0) {
					clearTimeout(t);
					btn.disabled=false;
					btn.innerHTML="淡入";
				}
		}
		function setAppear(){
			btn.disabled=true;
			opa=opa+0.1;
			obj.style.opacity=opa;
			a=setTimeout("setAppear()",100);
			if (opa>1) {
				clearTimeout(a);
				btn.disabled=false;
				btn.innerHTML="淡出";
			}
		}
		document.getElementById("fade-btn").onclick=function myfun(){
			if (btn.innerHTML=="淡出") {
				setFade();
			}
			if(btn.innerHTML=="淡入"){
				setAppear();
			}
		};*/
		
	//使用setInterval用法
	function fun1(){
		btn.disabled=true;
		t=setInterval(setFadeB,100);


	function setFadeB(){
		opa=opa-0.1;
		obj.style.opacity=opa;
		if (opa<=0) {
		clearInterval(t);
		btn.disabled=false;
		btn.innerHTML="淡入";
	}
	}
		
}

	function fun2(){
		btn.disabled=true;
		a=setInterval(setAppearB,100);
	function setAppearB(){
		opa=opa+0.1;
		obj.style.opacity=opa;
		if (opa>=1) {
			clearInterval(a);
			btn.disabled=false;
			btn.innerHTML="淡出";
		}	
	}
}
	document.getElementById("fade-btn").onclick=function myfun(){
		if (btn.innerHTML=="淡出") {
			fun1();
		}
		if (btn.innerHTML=="淡入") {
			fun2();
		}	
		};
	</script>
</body>
</html>
